(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"ct+p":function(t,c,e){"use strict";e.r(c),e.d(c,"HomeModule",function(){return _});var n=e("SVse"),i=e("tqRt"),o=e("xgIS"),a=e("Kj3r"),r=e("lJxs"),s=e("xl7o"),b=e("4blL"),l=e("XC/3"),u=e("8Y7J"),g=e("nr5L"),p=e("iInd"),m=e("l0rg"),h=e("vrAh"),d=e("Dxy4"),f=e("rJgo"),v=e("/Tzi"),R=e("SqCe"),w=e("UhP/"),Q=e("BSbQ");const O=["search"];function C(t,c){if(1&t){const t=u.Sb();u.Rb(0,"button",22),u.Yb("click",function(){u.kc(t);const c=u.ac().$implicit;return u.ac().addContact(c)}),u.vc(1,"Add"),u.Qb()}}function M(t,c){if(1&t&&(u.Rb(0,"mat-option"),u.Nb(1,"img",20),u.Rb(2,"span"),u.vc(3),u.Qb(),u.tc(4,C,2,0,"button",21),u.Qb()),2&t){const t=c.$implicit,e=u.ac();u.Ab(3),u.wc(t.username),u.Ab(1),u.gc("ngIf",t.username!==e.account.username)}}function P(t,c){if(1&t){const t=u.Sb();u.Rb(0,"mat-list-option",23),u.Yb("click",function(){u.kc(t);const e=c.$implicit;return u.ac().goToChat(e.roomID,e.contactID._id)}),u.Nb(1,"img",24),u.Rb(2,"p",25),u.Rb(3,"b"),u.vc(4),u.Qb(),u.Qb(),u.Rb(5,"span",26),u.vc(6,"Success"),u.Qb(),u.Nb(7,"mat-divider"),u.Qb()}if(2&t){const t=c.$implicit;u.Ab(1),u.gc("src",t.contactID.avatar,u.mc),u.Ab(3),u.wc(t.contactID.username)}}let k=(()=>{class t{constructor(t,c,e){this.store=t,this.homeService=c,this.router=e}ngOnInit(){this.load()}load(){this.contacts$=this.store.pipe(Object(i.t)(l.b)),this.accountSubcription$=this.store.pipe(Object(i.t)(b.b)).subscribe(t=>{this.account=t})}ngAfterViewInit(){Object(o.a)(this.search.nativeElement,"keyup").pipe(Object(a.a)(300),Object(r.a)(t=>t)).subscribe(()=>{const t=this.search.nativeElement.value;""!==t&&(this.searchResult$=this.homeService.searchUsers(t))})}addContact(t){this.homeService.addContact(t._id).subscribe()}goToChat(t,c){this.router.navigate(["ping/chat"],{queryParams:{roomID:t,contactID:c}})}goToProfile(){this.router.navigate(["ping/profile"])}logout(){this.store.dispatch(Object(s.b)())}ngOnDestroy(){this.accountSubcription$.unsubscribe()}}return t.\u0275fac=function(c){return new(c||t)(u.Mb(i.h),u.Mb(g.a),u.Mb(p.b))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-home"]],viewQuery:function(t,c){if(1&t&&u.yc(O,!0),2&t){let t;u.hc(t=u.Zb())&&(c.search=t.first)}},decls:33,vars:10,consts:[[1,"page-layout"],[1,"row"],[1,"col-sm-4","dummy"],[1,"col-sm-4"],["src","../../../assets/logo.png","width","65","height","65",1,"mt-3"],[1,"app-header","mb-2"],[1,"example-spacer"],["type","text","placeholder","Search..",1,"search-bar",3,"matAutocomplete"],["search",""],["searchRes","matAutocomplete"],[4,"ngFor","ngForOf"],["mat-button","",3,"matMenuTriggerFor"],["alt","profile pic","width","60","height","60",1,"avatar-img",3,"src"],["menu","matMenu"],["mat-menu-item","",3,"click"],["src","../../../assets/profile.png","width","27","height","27","alt","profile",1,"dropdwn-img"],["src","../../../assets/logout.png","width","27","height","27","alt","logout",1,"dropdwn-img"],[1,"contact-list"],[3,"multiple"],[3,"click",4,"ngFor","ngForOf"],["src","../../../assets/username.png","height","25","alt","profile",1,"option-img"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],[3,"click"],["matListAvatar","",3,"src"],["matLine",""],[1,"badge","badge-pill","badge-success"]],template:function(t,c){if(1&t&&(u.Rb(0,"div",0),u.Rb(1,"div",1),u.Nb(2,"div",2),u.Rb(3,"div",3),u.Rb(4,"mat-toolbar"),u.Nb(5,"img",4),u.Rb(6,"span",5),u.vc(7,"Ping"),u.Qb(),u.Nb(8,"span",6),u.Nb(9,"input",7,8),u.Rb(11,"mat-autocomplete",null,9),u.tc(13,M,5,2,"mat-option",10),u.bc(14,"async"),u.Qb(),u.Rb(15,"button",11),u.Nb(16,"img",12),u.Qb(),u.Rb(17,"mat-menu",null,13),u.Rb(19,"button",14),u.Yb("click",function(){return c.goToProfile()}),u.Nb(20,"img",15),u.Rb(21,"span"),u.vc(22,"Profile"),u.Qb(),u.Qb(),u.Rb(23,"button",14),u.Yb("click",function(){return c.logout()}),u.Nb(24,"img",16),u.Rb(25,"span"),u.vc(26,"Logout"),u.Qb(),u.Qb(),u.Qb(),u.Qb(),u.Nb(27,"app-call-notification"),u.Rb(28,"div",17),u.Rb(29,"mat-selection-list",18),u.tc(30,P,8,2,"mat-list-option",19),u.bc(31,"async"),u.Qb(),u.Qb(),u.Qb(),u.Nb(32,"div",2),u.Qb(),u.Qb()),2&t){const t=u.ic(12),e=u.ic(18);u.Ab(9),u.gc("matAutocomplete",t),u.Ab(4),u.gc("ngForOf",u.cc(14,6,c.searchResult$)),u.Ab(2),u.gc("matMenuTriggerFor",e),u.Ab(1),u.gc("src",c.account.avatar,u.mc),u.Ab(13),u.gc("multiple",!1),u.Ab(1),u.gc("ngForOf",u.cc(31,8,c.contacts$))}},directives:[m.a,h.c,h.a,n.k,d.a,f.d,f.a,f.b,v.a,R.d,w.g,n.l,R.c,R.a,w.e,Q.a],pipes:[n.b],styles:[".row[_ngcontent-%COMP%]{height:100%}.search-bar[_ngcontent-%COMP%]{padding:10px;background:#fff;border-radius:30px;outline:none;border:#fff;width:50%}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.dropdwn-img[_ngcontent-%COMP%]{margin-right:8px}.full-width[_ngcontent-%COMP%]{width:100%}.search-res[_ngcontent-%COMP%]{width:400px}.option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}.contact-list[_ngcontent-%COMP%]{background-color:#fff;height:92%}[dir=rtl][_ngcontent-%COMP%]   .option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}"]}),t})();var A=e("ziPz"),y=e("7bNT"),x=e("o9Mv"),N=e("hctd"),S=e("PCNd");const I=[{path:"",component:k}];let _=(()=>{class t{}return t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({factory:function(c){return new(c||t)},imports:[[n.c,N.a,S.a,p.c.forChild(I),i.j.forFeature(A.b,A.a,{metaReducers:A.c}),y.b.forFeature([x.a])],p.c]}),t})()}}]);